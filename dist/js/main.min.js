"use strict"; window.onload = function () { document.body.classList.add("loaded_hiding"), window.setTimeout(function () { document.body.classList.add("loaded"), document.body.classList.remove("loaded_hiding") }, 1500), explosionStart() }; const arrSuit = ["./images/elem1.PNG", "./images/elem2.PNG", "./images/elem3.PNG", "./images/elem4.PNG", "./images/elem5.PNG", "./images/elem6.PNG", "./images/elem7.PNG", "./images/elem8.PNG"], tern = document.querySelectorAll(".tern"), allside = document.querySelectorAll(".allside"), blockWin = document.querySelector(".you-winn__inner"), mainBlock = document.querySelector(".main"), fireworks = document.querySelector(".bg__fireworks"); let currentNum = 0, isStarted = !1, bodyFlashNum = 0; function animate({ timing: a, draw: s, duration: n }) { let l = performance.now(); requestAnimationFrame(function e(t) { let o = (t - l) / n; 1 < o && (o = 1); t = a(o); s(t), o < 1 && requestAnimationFrame(e) }) } const makeExplosion = () => { const e = document.querySelector("canvas"); e.style.display = "block"; 1 === currentNum ? setTimeout(() => { e.style.display = "none"; { const t = document.querySelector(".imageSlot4"); animate({ duration: 100, timing(e) { return Math.pow(e, 2) }, draw(e) { t.style.scale = "" + 6 * e, t.style.transform = `translate(${20 * e}%, ${15 * e}%)` } }) } }, 2700) : setTimeout(() => { e.style.display = "none" }, 2e3), setTimeout(() => { var e = document.querySelector(".bg__coins"); const t = e.cloneNode(), o = (mainBlock.append(t), e.cloneNode()), a = (mainBlock.append(o), t.classList.add("anim-coins-small-item"), e.cloneNode()); mainBlock.append(a), t.classList.add("anim-coins-small-item"), animate({ duration: 1700, timing(e) { return e }, draw(e) { t.style.top = 130 * e + "%", o.style.top = -90 * e + "%", a.style.top = -20 * e + "%", t.style.transform = `rotate(${180 * e + "deg"})`, o.style.transform = `rotate(${280 * e + "deg"})`, a.style.transform = `skew(${180 * e + "deg"})` } }) }, 500) }, bodyFlash = () => { const e = document.querySelector(".main__wrapp"); e.style.transition = "all .5s", 0 === bodyFlashNum ? setTimeout(() => { e.style.opacity = 1 }, 200) : (document.body.classList.add("white-flash"), e.style.opacity = 0, setTimeout(() => { e.style.opacity = 1, document.body.classList.remove("white-flash"), document.body.style.backgroundImage = 'url("./images/bg.png")' }, 500)), bodyFlashNum++ }, randomNum = e => Math.floor(Math.random() * e), photoChange = (t, o) => { animate({ duration: 600, timing(e) { return e }, draw(e) { t.style.opacity = e / 1e3, setTimeout(() => { t.src = o }, 0) } }), animate({ duration: 600, timing(e) { return e }, draw(e) { t.style.opacity = +e } }) }, showBlockMain = () => { const e = document.querySelector(".imageSlot4"), t = document.querySelector(".bg__budda"); setTimeout(() => { photoChange(e, "./images/slot-layer4-1.PNG"), photoChange(t, "./images/buddaR.PNG") }, 5700), bodyFlash(), setTimeout(() => { t.style.left = "5px", startSlots() }, 2e3) }, startSlots = () => { if (!isStarted) { isStarted = !0; for (let e = 0; e < 18; e++) { var t = Math.floor(7 * Math.random()); const o = allside[e].querySelector("img"); o.src = arrSuit[t], setTimeout(() => { o.closest(".front") && setTimeout(() => { o.src = arrSuit[arrSuit.length - 6] }, 900) }) } setTimeout(() => { for (let e = 0; e < 9; e++) { var t = tern[e].querySelector("img"); t.closest(".active") && t.classList.remove("active"), tern[e].style.transform = "rotateX(-11500deg)" } }, 0), tern[tern.length - 1].addEventListener("transitionend", () => { var t = document.querySelectorAll(".front"), e = document.querySelectorAll(".front>img"); for (let e = 0; e < t.length; e++)t[e].classList.add("active-winner"); e.forEach(e => { e.classList.add("active") }), setTimeout(() => { bodyFlash(), mainBlock.style.animation = "tada 1s 3", makeExplosion() }, 500), setTimeout(() => { mainBlock.style.transition = "1s", mainBlock.style.zIndex = 99, mainBlock.style.background = "#fff", blockWin.style.display = "flex" }, 3300) }), currentNum++ } }, explosionStart = () => { makeExplosion(), setTimeout(() => { showBlockMain() }, 1500) }; blockWin.addEventListener("click", e => { e.preventDefault(), console.log("Переход на страницу") });